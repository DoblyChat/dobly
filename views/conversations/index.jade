div.navbar
	div.navbar-inner
		span.brand Fluid Talk
		ul.nav
			li
				a(href="#", data-bind="event: { click: toggleNewConversation }") Add
			li
				a(href="#", data-bind="event: { click: toggleAllConversations }") Show All

div#allConversations.modal.hide.fade.in
	div.modal-header
				a.close(data-dismiss="modal") x
				h4 All conversations
	div.conversation-blocks.row-fluid(data-bind="foreach: conversations")
		div.pull-left.block
			div
				a(data-bind="text: topic, event: { click: $root.desktop.add }", href="#") 
			div(data-bind="foreach: lastMessages")
				div.muted(data-bind="text: username")
				div(data-bind="text:content")

div#newConversation.modal.hide.fade.in
			div.modal-header
				a.close(data-dismiss="modal") x
				h4 What else would you like to talk about?
			div.modal-body
					div.input-append
						input.span4(type="text", data-bind="value: newConversationTopic, valueUpdate: 'afterkeydown', event: { keypress: addNewConversation }")
			div.modal-footer
				button.btn(data-dismiss="modal") Cancel

div.desktop(data-bind="with: desktop")
	div.conversations.row-fluid(data-bind="foreach: conversations")
		div.conversation.span4
				div.nano
					div.content
						div.messages(data-bind="foreach: messages")
							div.message.row
								div.row
									div.username.muted(data-bind="text:username")
									div.timestamp.muted(data-bind="text:timestamp")
								div
									div(data-bind="text:content")
				div.text-input
					textarea(rows=3, placeholder="Enter your message here", data-bind="value: newMessage, valueUpdate: 'afterkeydown', event: { keypress: sendMessage }")

	hr 

	div.film-strip(data-bind="foreach: conversations")
		div.item.pull-left
			a(href="#", data-bind="text: topic")
			a.pull-right(href="#", data-bind="event: { click: $parent.remove }") Remove

input#data(type="hidden")(value=conversations)
input#desktop(type="hidden")(value=desktop);

script(type="text/javascript", src="/scripts/lib/jquery.js")
script(type="text/javascript", src="/scripts/lib/jquery.nanoscroller.min.js")
script(type="text/javascript", src="/scripts/lib/bootstrap.js")
script(type="text/javascript", src="/scripts/lib/knockout.js")
script(type="text/javascript", src="/socket.io/socket.io.js")
script(type="text/javascript", src="/scripts/client/message.js")
script(type="text/javascript", src="/scripts/client/conversation.js")
script(type="text/javascript", src="/scripts/client/desktop.js")
script(type="text/javascript", src="/scripts/client/viewModel.js")
script(type="text/javascript", src="/scripts/client/conversations.js")