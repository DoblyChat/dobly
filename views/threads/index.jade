div.main-thread.title
	h3
		span(data-bind="text: mainThread.title.content")
		small
			span &nbsp;created by&nbsp;
			span(data-bind="text: mainThread.title.username")
div.row
	div.span6#main_thread
		div.row(data-bind="visible:!mainThread.hasMessages()")
			div.span6
				em Messages from the group will appear here
		div.row(data-bind="foreach: mainThread.messages, visible: mainThread.hasMessages")
			div.span6.message
				div.row
					div.span6
						div.username.muted(data-bind="text:username")
						div.timestamp.muted(data-bind="text:timestamp")
				div.row
					div.span6.content(data-bind="text:content")
		div.row.newMessage
			div.span6
				input.span6(type="text", placeholder="Enter your message here", data-bind="value: mainThread.newMessage, valueUpdate: 'afterkeydown', event: { keypress: mainThread.sendMessage }")

	div.span5.offset1
		div
			div
				p 
					span Have something else on your mind? 
					a#lnkNewThread(href="#") Share it 
					span with the group
			div#newThread.well(style="display: none;")
				div.input-append
					input.span4(type="text", placeholder="What's on your mind?", data-bind="value: newThread, valueUpdate: 'afterkeydown', event: { keypress: addNewThread }")

		div(data-bind="foreach: threads")
			div.well.thread
				div.row.thread-header(data-bind="click: toggle")
					div.span4.message(style="width: 94%")
						div.row
							div.span4(style="width: 94%")
								div.username.muted(data-bind="text: title.username")
								div.timestamp.muted(data-bind="text: title.timestamp")
						div.row
							div.span4.content(style="width: 94%")
								h4(data-bind="text: title.content")
				div(data-bind="visible: !isCollapsed()")
					div.row.thread-messages(data-bind="foreach: messages, visible: hasMessages()")
						div.span4.message(style="width: 94%")
							div.row
								div.span4(style="width: 94%")
									div.username.muted(data-bind="text: username")
									div.timestamp.muted(data-bind="text: timestamp")
							div.row
								div.span4.content(style="width: 94%", data-bind="text: content")
					div.row
						div.span6
							input.span4(type="text", placeholder="Answer", data-bind="value: newMessage, valueUpdate: 'afterkeydown', event: { keypress: sendMessage }")

input#data(type="hidden")(value=conversation)
input#preferences(type="hidden")(value=preferences)

script(type="text/javascript", src="/scripts/require.js", data-main="/scripts/client/threads.js")